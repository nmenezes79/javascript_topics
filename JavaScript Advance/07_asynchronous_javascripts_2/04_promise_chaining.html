<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- Bootstrap -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
	<title>session_22</title>
</head>

<body>
	<h4 class=" display-4 text-center my-4 text-primary">Asynchronous JavaScript 2 - Promise Chaining</h4>

	<script>
		// Asynchronous Promise chaining in JavaScript is a technique used to handle 
		// multiple asynchronous operations in sequence, where each operation waits 
		// for the previous one to complete before executing. This is commonly 
		// done using .then() methods chained together.

		// When a promise returns a result, the .then() method can be used to perform 
		// further operations. If that operation also returns a promise, 
		// we can chain another .then() to continue the flow.

		// Get User Id
		function getUserId() {
			return new Promise((resolve) => {
				setTimeout(() => {
					console.log("Fetched User ID");
					resolve(101);
				}, 1000);
			});
		};

		// Get User Details
		function getUserDetails(id) {
			return new Promise((resolve) => {
				setTimeout(() => {
					console.log("Fetched Details For User ID:", id);
					resolve({id: id, name: "Alice"});
				}, 1000);
			});
		};

		// Get User Post
		function getUserPost(user) {
			return new Promise((resolve) => {
				setTimeout(() => {
					console.log("Fetched Post For:", user.name);
					resolve(["Post1", "Post2"])
				}, 1000);
			});
		};

		// Promise Chaining
		getUserId()
		.then((id) => getUserDetails(id))
		.then((user) => getUserPost(user))
		.then((posts) => {
			console.log("User Posts:", posts);
		})
		.catch((err) => {
			console.error("Error Occurred:", err);
		});

	</script>
</body>

</html>